(()=>{var e={};e.id=109,e.ids=[109],e.modules={399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},8893:e=>{"use strict";e.exports=require("buffer")},7048:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},2925:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>_,routeModule:()=>p,serverHooks:()=>x,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>m});var s={};t.r(s),t.d(s,{PATCH:()=>l});var i=t(2412),n=t(4293),a=t(4147),o=t(7856),u=t(8668),d=t(7721);async function l(e,{params:r}){let t=(0,u.R)(),s=Number(r.id);if(!Number.isFinite(s))return new o.NextResponse("Invalid id",{status:400});let i=await e.json(),n=d.XU.safeParse(i);if(!n.success)return o.NextResponse.json({error:n.error.flatten()},{status:400});let{received_by:a,arrived_at:l}=n.data,{data:p,error:c}=await t.from("orders").update({status:"ARRIVED",received_by:a,arrived_at:l??new Date().toISOString()}).eq("id",s).select("*").single();return c?new o.NextResponse(c.message,{status:500}):o.NextResponse.json(p,{status:200})}let p=new i.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/orders/[id]/arrive/route",pathname:"/api/orders/[id]/arrive",filename:"route",bundlePath:"app/api/orders/[id]/arrive/route"},resolvedPagePath:"/workspaces/Levinson-Cloud-Inventory-System/src/app/api/orders/[id]/arrive/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:c,workUnitAsyncStorage:m,serverHooks:x}=p;function _(){return(0,a.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:m})}},5303:()=>{},8668:(e,r,t)=>{"use strict";t.d(r,{R:()=>i});var s=t(7420);function i(){let e="https://xwehprkbubnycfinbuio.supabase.co",r=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!e||!r)throw Error("Supabase server env vars missing: NEXT_PUBLIC_SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY");return(0,s.eI)(e,r,{auth:{persistSession:!1},global:{headers:{"X-Client-Info":"sol-levinson-inventory-server"}}})}},7721:(e,r,t)=>{"use strict";t.d(r,{V7:()=>a,XU:()=>o});var s=t(6475);let i=s.z.enum(["casket","urn"]);s.z.enum(["PENDING","BACKORDERED","ARRIVED","SPECIAL"]);let n=s.z.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Expected YYYY-MM-DD").nullable().optional().transform(e=>""===e?null:e??null),a=s.z.object({item_type:i,item_id:s.z.number().int().nullable().optional().default(null),item_name:s.z.string().min(1).max(200).nullable().optional().default(null),po_number:s.z.string().min(1).max(120),expected_date:n,backordered:s.z.boolean().default(!1),tbd_expected:s.z.boolean().default(!1),special_order:s.z.boolean().default(!1),deceased_name:s.z.string().min(1).max(200).nullable().optional().default(null)}).refine(e=>e.special_order?!!e.item_name&&null===e.item_id:null!==e.item_id&&!e.item_name,{message:"For special orders use item_name (item_id null). For normal orders use item_id (no item_name)."}).refine(e=>!!e.backordered||!!e.tbd_expected||!!e.expected_date,{message:"Either provide expected_date or mark as backordered/TBD."}),o=s.z.object({received_by:s.z.string().min(1).max(120),arrived_at:s.z.string().datetime().optional()})}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[267,289,475],()=>t(2925));module.exports=s})();